/**
 * 日记本插件按钮样式
 * 包含三个主要功能按钮：日记本、写日记、记录
 */

// ========== 按钮容器 ==========
.diary-plugin-buttons {
  @include diary-flex(row, center, flex-start);
  gap: $diary-spacing-sm;
  margin: $diary-spacing-sm;
  
  @include diary-mobile {
    flex-wrap: wrap;
    justify-content: center;
    gap: $diary-spacing-xs;
    margin: $diary-spacing-xs;
  }
}

// ========== 功能按钮基础样式 ==========
.diary-function-button {
  @include diary-button-base;
  background: linear-gradient(135deg, $diary-primary-light 0%, $diary-primary 50%, $diary-primary-dark 100%);
  color: white;
  border: $diary-border-thin solid $diary-border-medium;
  box-shadow: $diary-shadow-light;
  gap: $diary-spacing-xs;
  min-width: 80px;
  
  // 图标样式
  i {
    font-size: $diary-font-sm;
    margin-right: $diary-spacing-xs;
    
    @include diary-mobile {
      margin-right: 0;
    }
  }
  
  // 按钮文本
  .diary-button-text {
    font-size: $diary-font-sm;
    font-weight: 500;
    
    @include diary-mobile {
      display: none; // 移动端隐藏文字，只显示图标
    }
  }
  
  // 悬停效果
  &:hover {
    transform: translateY(-1px);
    box-shadow: $diary-shadow-medium;
    background: linear-gradient(135deg, $diary-primary 0%, $diary-primary-dark 50%, darken($diary-primary-dark, 5%) 100%);
  }
  
  // 激活效果
  &:active {
    transform: translateY(0);
    box-shadow: $diary-shadow-light;
  }
  
  // 禁用状态
  &:disabled,
  &.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    
    &:hover {
      transform: none;
      box-shadow: $diary-shadow-light;
      background: linear-gradient(135deg, $diary-primary-light 0%, $diary-primary 50%, $diary-primary-dark 100%);
    }
  }
  
  // 加载状态
  &.loading {
    position: relative;
    color: transparent;
    
    &::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 16px;
      height: 16px;
      border: 2px solid transparent;
      border-top: 2px solid white;
      border-radius: 50%;
      animation: diary-spin 1s linear infinite;
    }
  }
}

// ========== 特定按钮样式 ==========

// 日记本按钮 - 蓝色调
#diary_book_btn {
  background: linear-gradient(135deg, lighten($diary-info, 10%) 0%, $diary-info 50%, darken($diary-info, 10%) 100%);
  border-color: $diary-info;
  
  &:hover {
    background: linear-gradient(135deg, $diary-info 0%, darken($diary-info, 10%) 50%, darken($diary-info, 15%) 100%);
  }
}

// 写日记按钮 - 绿色调  
#diary_write_btn {
  background: linear-gradient(135deg, lighten($diary-success, 10%) 0%, $diary-success 50%, darken($diary-success, 10%) 100%);
  border-color: $diary-success;
  
  &:hover {
    background: linear-gradient(135deg, $diary-success 0%, darken($diary-success, 10%) 50%, darken($diary-success, 15%) 100%);
  }
}

// 记录按钮 - 橙色调
#diary_record_btn {
  background: linear-gradient(135deg, lighten($diary-warning, 10%) 0%, $diary-warning 50%, darken($diary-warning, 10%) 100%);
  border-color: $diary-warning;
  
  &:hover {
    background: linear-gradient(135deg, $diary-warning 0%, darken($diary-warning, 10%) 50%, darken($diary-warning, 15%) 100%);
  }
}

// ========== 移动端优化 ==========
@include diary-mobile {
  .diary-function-button {
    min-width: 44px; // 移动端最小触摸区域
    min-height: 44px;
    padding: $diary-spacing-sm;
    
    // 只显示图标
    i {
      margin-right: 0;
      font-size: $diary-font-base;
    }
  }
  
  // 移动端按钮组布局调整
  .diary-plugin-buttons {
    position: fixed;
    bottom: 20px;
    right: 20px;
    flex-direction: column;
    background: rgba(white, 0.9);
    backdrop-filter: blur(10px);
    border-radius: $diary-radius-xl;
    padding: $diary-spacing-sm;
    box-shadow: $diary-shadow-heavy;
    z-index: $diary-z-index-base + 10;
    
    .diary-function-button {
      width: 44px;
      height: 44px;
      border-radius: $diary-radius-round;
      margin: $diary-spacing-xs 0;
    }
  }
}

// ========== 旋转动画 ==========
@keyframes diary-spin {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}

// ========== 状态指示器 ==========
.diary-button-indicator {
  position: absolute;
  top: -2px;
  right: -2px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: $diary-error;
  border: 2px solid white;
  
  // 脉动动画
  &.pulse {
    animation: diary-pulse 2s infinite;
  }
}

@keyframes diary-pulse {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.2);
    opacity: 0.7;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

// ========== 工具提示增强 ==========
.diary-function-button {
  position: relative;
  
  // 自定义工具提示
  &::before {
    content: attr(title);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    padding: $diary-spacing-xs $diary-spacing-sm;
    background: rgba($diary-text-primary, 0.9);
    color: white;
    font-size: $diary-font-xs;
    border-radius: $diary-radius-sm;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: all $diary-duration-normal $diary-ease-out;
    z-index: $diary-z-index-tooltip;
    margin-bottom: $diary-spacing-xs;
  }
  
  &:hover::before {
    opacity: 1;
    
    @include diary-mobile {
      display: none; // 移动端不显示工具提示
    }
  }
}
