# 📚 SillyTavern 日记本插件

智能日记管理系统，为SillyTavern提供AI辅助的日记写作和管理功能。

## ✨ 功能特性

### 🖊️ 智能写作
- **AI辅助生成**：让AI帮你生成格式化的日记内容
- **智能预设切换**：写日记时自动切换到专用预设，完成后恢复
- **自定义角色**：可以指定任意角色名称进行日记写作
- **格式自动识别**：自动解析AI回复中的日记格式内容

### 📖 完整管理
- **分类浏览**：按角色分类管理所有日记条目
- **分页显示**：大量日记的友好浏览体验
- **详情查看**：完整的日记内容查看界面
- **快速删除**：支持单条日记的删除操作

### 📱 移动端支持
- **响应式设计**：完美适配移动端设备
- **触摸优化**：针对移动端的交互优化
- **性能优化**：移动端专用的性能优化

### ⚙️ 高级功能
- **预设管理**：图形化的预设配置界面
- **自动清理**：成功记录后自动删除对话消息
- **错误恢复**：智能的错误处理和重试机制
- **数据持久化**：基于SillyTavern WorldBook的可靠存储

## 🚀 安装方法

### 自动安装（推荐）
1. 打开SillyTavern
2. 进入扩展管理页面
3. 点击"安装扩展"
4. 输入插件地址或选择插件文件
5. 等待安装完成

### 手动安装
1. 将整个`日记本`文件夹复制到SillyTavern的`scripts/extensions/third-party/`目录
2. 重启SillyTavern
3. 在扩展列表中启用"日记本"插件

## 📋 使用指南

### 初次设置
1. **启用插件**：在扩展设置中启用日记本功能
2. **配置预设**（可选）：
   - 点击日记本封面右上角的设置按钮
   - 选择一个专门用于写日记的预设
   - 保存设置

### 开始写日记
1. **点击"写日记"按钮**
2. **选择角色**：
   - 直接点击"发送"使用当前角色卡名称
   - 或输入自定义角色名称
3. **与AI对话**：描述今天发生的事情
4. **自动记录**：AI回复包含日记格式时会自动保存

### 查看日记
1. **点击"日记本"按钮**
2. **浏览角色**：选择要查看的角色
3. **查看列表**：浏览该角色的所有日记
4. **查看详情**：点击日记卡片查看完整内容

### 手动记录
- 如果自动识别失败，可以点击"记录"按钮手动解析最新的AI回复

## 🎯 日记格式要求

AI回复必须包含以下格式的内容才能被识别：

```
［日记标题：今天的标题］
［日记时间：2024年1月1日］
［日记内容：今天发生了很多有趣的事情...］
```

**重要提示：**
- 必须使用全角方括号 `［ ］`
- 标题、时间、内容三个部分缺一不可
- 可以在这些标记前后添加其他内容

## ⚙️ 设置选项

### 基础设置
- **启用日记本功能**：总开关
- **自动删除日记消息**：成功保存后自动删除对话中的日记内容
- **移动端优化**：启用移动端专用的界面优化

### 存储设置
- **世界书名称**：用于存储日记数据的世界书名称

### 预设设置
- **日记专用预设**：写日记时自动切换的预设
- **预设列表管理**：刷新和管理可用预设

## 🔧 故障排除

### 日记无法识别
1. 检查AI回复是否包含正确的格式标记
2. 确认使用的是全角方括号 `［ ］`
3. 检查标题、时间、内容是否都存在

### 预设切换失败
1. 检查所选预设是否确实存在
2. 尝试刷新预设列表
3. 检查SillyTavern是否支持预设切换

### 移动端显示异常
1. 确保启用了移动端优化选项
2. 尝试刷新页面
3. 检查浏览器兼容性

### 数据丢失
1. 检查世界书是否被意外删除
2. 确认世界书名称设置正确
3. 查看SillyTavern的备份文件

## 🆘 支持与反馈

如果遇到问题或有功能建议，请通过以下方式联系：

- **GitHub Issues**：提交bug报告或功能请求
- **SillyTavern Discord**：在相关频道寻求帮助
- **社区论坛**：与其他用户分享使用经验

## 📄 许可证

本插件采用开源许可证发布，详情请查看LICENSE文件。

## 🙏 致谢

感谢SillyTavern开发团队提供的强大平台，以及社区用户的测试和反馈。

---

**版本：** v1.0.0  
**更新时间：** 2024年3月  
**兼容性：** SillyTavern v1.10.0+
